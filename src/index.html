<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <meta name="theme-color" content="#eae9e9" />
    <meta
      name="description"
      content="Meme generator tool to easily create memes bu uploading images or taking a photo."
    />
    <title>$WIFE Meme Generator</title>
    <link rel="manifest" href="manifest.webmanifest" />
    <link rel="icon" sizes="192x192" href="assets/app-icons/favicon-192.png" />
    <link rel="apple-touch-icon" href="assets/app-icons/ios/180.png" />
    <script src="./js/register-service-worker.js" type="module"></script>
    <script src="./js/index.js" type="module"></script>
  </head>
  <body>
    <noscript>
      <div class="alert alert-danger text-center rounded-0" role="alert">
        This app requires JavaScript to be enabled in your browser.
      </div>
    </noscript>

    <main>
      <div class="errors-container">
        <div class="container mt-2">
          <div class="row justify-content-center">
            <div class="col-lg-6" id="errorsContainer"></div>
          </div>
        </div>
      </div>

      <header class="site-header">
        <img
          src="assets/logo.png"
          width="90"
          height="90"
          alt="Logo"
          class="d-block rounded-circle border"
        />
        <h1 class="page-title">Wifejak Meme Generator</h1>
      </header>

      <div class="container">
        <div
          class="row mx-0 mb-5 py-4 bg-white border border-light rounded shadow"
        >
          <div class="col-lg-8 col-md-7 mb-3 mb-md-0">
            <files-dropzone class="dropzone">
              <canvas
                id="canvas"
                class="canvas border shadow-sm"
                hidden
              ></canvas>

              <button
                type="button"
                class="clear-canvas-button btn btn-danger shadow"
                id="clearCanvasBtn"
                hidden
                aria-label="Clear canvas"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 512 512"
                  width="1.5em"
                  height="1.5em"
                  aria-hidden="true"
                >
                  <path
                    fill="currentColor"
                    d="M128 405.429C128 428.846 147.198 448 170.667 448h170.667C364.802 448 384 428.846 384 405.429V160H128v245.429zM416 96h-80l-26.785-32H202.786L176 96H96v32h320V96z"
                  />
                </svg>
              </button>

              <div id="instructions" class="instructions">
                <img
                  src="assets/icons/add-image.svg"
                  width="60"
                  height="60"
                  alt="add image icon"
                />
                <div>
                  <p class="mb-0">
                    Drag & Drop an image here or click to select an image from
                    your device.
                  </p>
                  <p class="m-0 text-muted">
                    <em
                      ><small
                        >All uploaded images are processed locally in your
                        browser. No data is sent to any server.</small
                      ></em
                    >
                  </p>
                </div>
              </div>
            </files-dropzone>
          </div>

          <div class="col-lg-4 col-md-5">
            <details class="mb-4" open>
              <summary><strong>Image selection options</strong></summary>

              <div class="bg-light py-4 px-3 border shadow-sm rounded">
                <div class="mb-3">
                  <label for="imageUploadMethodSelect" class="visually-hidden"
                    >Image selection method</label
                  >

                  <select
                    class="form-select"
                    id="imageUploadMethodSelect"
                    autocomplete="off"
                  >
                    <option value="gallery">Select image from gallery</option>
                    <option value="fileSelectBtn">
                      Use an image from your device
                    </option>
                    <option value="imageUrlForm">Use an image from URL</option>
                    <option value="openVideoModalBtn">
                      Take photo with webcam
                    </option>
                    <option value="solidColorForm">Use solid color</option>
                  </select>
                </div>

                <div class="upload-method" id="gallery">
                  <div class="input-group mb-1">
                    <label for="gallerySearch" class="visually-hidden"
                      >Filter templates</label
                    >
                    <input
                      type="search"
                      class="form-control"
                      id="gallerySearch"
                      placeholder="Filter templates..."
                      aria-label="Filter templates"
                    />
                    <span class="input-group-text">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="16"
                        height="16"
                        fill="currentColor"
                        viewBox="0 0 16 16"
                        aria-hidden="true"
                      >
                        <path
                          d="M1.5 1.5A.5.5 0 0 1 2 1h12a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.128.334L10 8.692V13.5a.5.5 0 0 1-.342.474l-3 1A.5.5 0 0 1 6 14.5V8.692L1.628 3.834A.5.5 0 0 1 1.5 3.5v-2zm1 .5v1.308l4.372 4.858A.5.5 0 0 1 7 8.5v5.306l2-.666V8.5a.5.5 0 0 1 .128-.334L13.5 3.308V2h-11z"
                        />
                      </svg>
                    </span>
                  </div>

                  <div class="gallery">
                    <div class="gallery__no-results" hidden aria-live="polite">
                      No results found
                    </div>

                    <button type="button" class="btn btn-link">
                      <img
                        loading="lazy"
                        src="assets/meme-templates/wifejak-1280x720.png"
                        alt="wifejak 1280x720"
                      />
                    </button>
                    <button type="button" class="btn btn-link">
                      <img
                        loading="lazy"
                        src="assets/meme-templates/wifejak-500x500.png"
                        alt="wifejak 500x500"
                      />
                    </button>
                    <button type="button" class="btn btn-link">
                      <img
                        loading="lazy"
                        src="assets/meme-templates/wifejak-standing.png"
                        alt="wifejak standing"
                      />
                    </button>
                    <button type="button" class="btn btn-link">
                      <img
                        loading="lazy"
                        src="assets/meme-templates/wifejak-civilwar.jpeg"
                        alt="wifejak civilwar"
                      />
                    </button>
                    <button type="button" class="btn btn-link">
                      <img
                        loading="lazy"
                        src="assets/meme-templates/wifejak-couch.jpeg"
                        alt="wifejak couch"
                      />
                    </button>
                    <button type="button" class="btn btn-link">
                      <img
                        loading="lazy"
                        src="assets/meme-templates/wifejak-laser-eyes.jpeg"
                        alt="wifejak laser eyes"
                      />
                    </button>
                    <button type="button" class="btn btn-link">
                      <img
                        loading="lazy"
                        src="assets/meme-templates/wifejak-pepe-sweater.jpeg"
                        alt="wifejak pepe sweater"
                      />
                    </button>
                    <button type="button" class="btn btn-link">
                      <img
                        loading="lazy"
                        src="assets/meme-templates/wifejak-smile.jpeg"
                        alt="wifejak smile"
                      />
                    </button>
                    <button type="button" class="btn btn-link">
                      <img
                        loading="lazy"
                        src="assets/meme-templates/wifejak-wojak-looking.jpeg"
                        alt="wifejak wojak looking"
                      />
                    </button>
                    <button type="button" class="btn btn-link">
                      <img
                        loading="lazy"
                        src="assets/meme-templates/wifejak-hijab.jpeg"
                        alt="wifejak jihab"
                      />
                    </button>
                  </div>
                </div>

                <button
                  type="button"
                  id="fileSelectBtn"
                  class="btn btn-primary w-100 d-flex justify-content-center align-items-center gap-2 upload-method"
                  hidden
                >
                  <img
                    src="assets/icons/photo.svg"
                    width="20"
                    height="20"
                    alt="photo icon"
                  />
                  Select Image
                </button>

                <form
                  id="imageUrlForm"
                  class="upload-method d-flex flex-nowrap gap-2"
                  hidden
                >
                  <div class="flex-grow-1">
                    <label class="visually-hidden" for="imageUrl"
                      >Image URL</label
                    >
                    <input
                      type="url"
                      name="imageUrl"
                      id="imageUrl"
                      autocomplete="off"
                      placeholder="Enter image URL"
                      class="form-control w-100"
                    />
                  </div>

                  <button
                    type="submit"
                    class="btn btn-primary align-self-end"
                    style="min-width: 75px"
                  >
                    <div class="spinner" hidden>
                      <span
                        class="spinner-border spinner-border-sm"
                        role="status"
                        aria-hidden="true"
                      ></span>
                      <span class="visually-hidden">Loading...</span>
                    </div>
                    <span class="label">Submit</span>
                  </button>
                </form>

                <button
                  class="upload-method btn btn-primary w-100 d-flex align-items-center justify-content-center gap-2"
                  id="openVideoModalBtn"
                  hidden
                >
                  <img
                    src="assets/icons/camera.svg"
                    width="20"
                    height="20"
                    alt="camera icon"
                  />
                  Take Photo
                </button>

                <form id="solidColorForm" class="upload-method row g-2" hidden>
                  <div class="col-4">
                    <label for="canvasColor">Color:</label>
                    <input
                      type="color"
                      name="canvasColor"
                      id="canvasColor"
                      class="form-control"
                      value="#ffffff"
                      style="height: 33.5px"
                    />
                  </div>
                  <div class="col-4">
                    <label for="canvasWidth">Width:</label>
                    <input
                      type="number"
                      name="canvasWidth"
                      id="canvasWidth"
                      class="form-control"
                      min="0"
                      value="800"
                    />
                  </div>

                  <div class="col-4">
                    <label for="canvasHeight">Height:</label>
                    <input
                      type="number"
                      name="canvasHeight"
                      id="canvasHeight"
                      class="form-control"
                      min="0"
                      value="600"
                    />
                  </div>
                </form>

                <form id="maxImageDimensionsForm" class="mt-3">
                  <label
                    for="maxImageDimensions"
                    class="form-label d-flex align-items-center gap-1"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      fill="var(--bs-primary)"
                      viewBox="0 0 16 16"
                      style="cursor: help"
                    >
                      <title>
                        Select the maximum dimensions for the image. Images will
                        be resized to fit within these dimensions while
                        maintaining their aspect ratio if they exceed the
                        specified dimensions.
                      </title>
                      <path
                        d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"
                      />
                      <path
                        d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0"
                      />
                    </svg>
                    Max image dimensions
                  </label>
                  <select
                    name="maxImageDimensions"
                    id="maxImageDimensions"
                    class="form-select"
                    disabled
                  >
                    <option value="800x600">800x600</option>
                    <option value="1600x1200">1600x1200</option>
                    <option value="2400x1800">2400x1800</option>
                    <option value="3200x2400">3200x2400</option>
                    <option value="4000x3000" selected>4000x3000</option>
                  </select>
                </form>
              </div>
            </details>

            <details open>
              <summary><strong>Text options</strong></summary>

              <div id="textboxesContainer" class="textboxes-container"></div>

              <div class="d-flex justify-content-end mt-3">
                <button
                  class="btn btn-outline-dark d-flex align-items-center"
                  id="addTextboxBtn"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 512 512"
                    width="18"
                    height="18"
                    aria-hidden="true"
                  >
                    <path
                      fill="currentColor"
                      d="M416 277.333H277.333V416h-42.666V277.333H96v-42.666h138.667V96h42.666v138.667H416v42.666z"
                    />
                  </svg>
                  Add text
                </button>
              </div>
            </details>

            <button
              type="button"
              class="btn btn-primary w-100 mt-5 d-flex align-items-center justify-content-center"
              id="generateMemeBtn"
              disabled
              autocomplete="off"
            >
              Generate Meme
            </button>
          </div>
        </div>

        <div class="row mb-5"></div>
      </div>

      <modal-element id="videoModal" static-backdrop>
        <h5 slot="header">Capture image</h5>
        <capture-photo no-image></capture-photo>
      </modal-element>

      <modal-element id="downloadModal">
        <h5 slot="header">Download Meme</h5>

        <img
          class="img-thumbnail d-block mx-auto"
          id="downloadMemePreview"
          alt="meme preview"
        />

        <div slot="footer">
          <a class="btn btn-primary" href="#" download="" id="downloadMemeBtn">
            <img
              src="assets/icons/save.svg"
              width="20"
              height="20"
              alt="Generate meme"
            />
            Download
          </a>

          <web-share hidden>
            <button
              slot="button"
              behavior="button"
              type="button"
              class="btn btn-dark"
            >
              <img
                src="assets/icons/share.svg"
                width="20"
                height="20"
                alt="Share"
              />
              Share
            </button>
          </web-share>
        </div>
      </modal-element>

      <modal-element id="removeConfirmationModal">
        <h5 slot="header">Remove text</h5>
        <p>Are you sure you want to remove this text box?</p>
        <footer slot="footer" class="text-end justify-content-end">
          <form id="removeTextForm">
            <input type="hidden" name="textbox-id" />
            <button
              type="button"
              class="btn btn-outline-secondary"
              data-me-close
            >
              Cancel
            </button>
            <button type="submit" class="btn btn-danger">Remove</button>
          </form>
        </footer>
      </modal-element>
    </main>
  </body>
</html>
